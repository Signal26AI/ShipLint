---
import BaseLayout from './BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description: string;
  canonical?: string;
  errorCode: string;
  severity: 'Rejection' | 'Delay';
  headline: string;
  subtitle: string;
  structuredData?: string;
  faqData?: string;
}

const { title, description, canonical, errorCode, severity, headline, subtitle, structuredData, faqData } = Astro.props;
---

<BaseLayout title={title} description={description} canonical={canonical} ogType="article">
  <Fragment slot="head">
    {structuredData && <script type="application/ld+json" set:html={structuredData} />}
    {faqData && <script type="application/ld+json" set:html={faqData} />}
  </Fragment>

  <Nav showSections={false} />

  <main id="main" class="pt-16">
    <div class="max-w-4xl mx-auto px-6 py-12">
      <!-- Breadcrumb -->
      <nav aria-label="Breadcrumb" class="mb-8 text-sm text-muted">
        <a href="/" class="hover:text-accent transition-colors">ShipLint</a>
        <span class="mx-2">›</span>
        <a href="/errors/" class="hover:text-accent transition-colors">Error Codes</a>
        <span class="mx-2">›</span>
        <span class="text-white">{errorCode}</span>
      </nav>

      <!-- Header -->
      <header class="mb-12">
        <div class={`inline-block px-3 py-1 rounded-full text-xs font-medium tracking-wide uppercase mb-4 ${severity === 'Rejection' ? 'bg-red-500/10 text-red-400' : 'bg-yellow-500/10 text-yellow-400'}`}>
          {severity === 'Rejection' ? 'App Store Rejection' : 'Upload Delay'}
        </div>
        <h1 class="text-4xl md:text-5xl font-extrabold text-white leading-tight mb-4">
          Fix <span class="gradient-text">{errorCode}</span>:<br>{headline}
        </h1>
        <p class="text-lg text-muted max-w-2xl" set:html={subtitle} />
      </header>

      <slot />
    </div>
  </main>

  <Footer />
</BaseLayout>
